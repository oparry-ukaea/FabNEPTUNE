
cd $job_results
$run_prefix

export OMP_NUM_THREADS=1
export FI_MR_CACHE_MAX_COUNT=0

# Add nektar libraries to the ld library path
export LD_LIBRARY_PATH=/opt/gcc/10.2.0/snos/lib64:$nektar_build_dir/ThirdParty/dist/lib:$nektar_build_dir/dist/lib64:$LD_LIBRARY_PATH

# Add nektar binaries to the path
export PATH="$nektar_build_dir/dist/bin:$PATH"
# Add miniconda binaries to the path
export PATH="$miniconda_dir/bin:$PATH"
# Add locally installed (python) packages to the path
export PATH="$local_pkg_dir/.local/bin:$PATH"
/usr/bin/env > env.log

start_time="$(date -u +%s.%n)"
echo "Start $convection_2d_exec program..."
start_time="$(date -u +%s.%n)"
echo "input xml file name:  $convection_2d_input"

# Ensure python3 is on the path
pyinterp=$(which python3)
if [ -n "$pyinterp" ]; then
    pyversion=$(python3 --version) 
    echo "Using [$pyversion] interpreter at [$pyinterp]"
else
    echo "python3 not found"
    exit 1
fi

# Execute easyvvuq sampler via Python script
python3     convection_2d_easyvvuq_init_run_analyse_remote.py     $machine_name    '$run_command_remote'   $convection_2d_exec   $venv_dir

end_time="$(date -u +%s.%n)"
elapsed="$(bc <<<"$end_time-$start_time")"
echo -e "\n\nTotal Executing Time = $elapsed seconds\n" > time.txt
